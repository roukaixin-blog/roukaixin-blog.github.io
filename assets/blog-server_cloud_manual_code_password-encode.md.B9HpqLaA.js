import{_ as s,c as a,o as i,a1 as e}from"./chunks/framework.7sYMctOP.js";const b=JSON.parse('{"title":"PasswordEncode","description":"","frontmatter":{},"headers":[],"relativePath":"blog-server/cloud/manual/code/password-encode.md","filePath":"blog-server/cloud/manual/code/password-encode.md","lastUpdated":1706577009000}'),n={name:"blog-server/cloud/manual/code/password-encode.md"},p=e(`<h1 id="passwordencode" tabindex="-1">PasswordEncode <a class="header-anchor" href="#passwordencode" aria-label="Permalink to &quot;PasswordEncode&quot;">​</a></h1><h2 id="注入-passwordencode" tabindex="-1">注入 <code>PasswordEncode</code> <a class="header-anchor" href="#注入-passwordencode" aria-label="Permalink to &quot;注入 \`PasswordEncode\`&quot;">​</a></h2><p>创建 <code>DelegatingPasswordEncoder</code> 对象，并使用 <code>@baen</code> 进行注入</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PasswordEncoder </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">passwordEncoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DelegatingPasswordEncoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(passwordEncoderProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getEncodingId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getEncodingId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), encoders);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">说明</p><p><code>DelegatingPasswordEncoder</code> 有两个参数和四个参数的构造方法。</p><p>1、两个参数： 一个是默认加密的 <code>encodingId</code>(官方推荐<code>bcrypt</code>)，一个是加密实现类的 <code>map</code></p><p>2、四个参数： 四个参数中的前面两个和两个参数是一样的，后面两个分别是前缀和后缀，默认是大括号<code>{}</code></p></div><h2 id="加密配置说明" tabindex="-1">加密配置说明 <a class="header-anchor" href="#加密配置说明" aria-label="Permalink to &quot;加密配置说明&quot;">​</a></h2><p>使用配置文件对 <code>BCryptPasswordEncoder</code>、<code>Pbkdf2PasswordEncoder</code>、<code>SCryptPasswordEncoder</code>、<code>NoOpPasswordEncoder</code> 这些加密方式进行注入。</p><blockquote><p>相关配置</p></blockquote><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-7oEOe" id="tab-w5uHXyB" checked><label for="tab-w5uHXyB">yaml</label><input type="radio" name="group-7oEOe" id="tab-b8lBZVz"><label for="tab-b8lBZVz">properties</label></div><div class="blocks"><div class="language-yaml vp-adaptive-theme active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  security</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    password-encoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      encoding-id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bcrypt</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      encoders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        bcrypt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        scrypt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        pbkdf2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        noop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-properties vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">spring.security.password-encoder.encoding-id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=bcrypt</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">spring.security.password-encoder.encoders.bcrypt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=false</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">spring.security.password-encoder.encoders.scrypt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=false</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">spring.security.password-encoder.encoders.pbkdf2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=false</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">spring.security.password-encoder.encoders.noop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div></div><div class="tip custom-block"><p class="custom-block-title">说明</p><p>1、如果自定义 <code>encoing-id</code> 之后，<code>encoders</code> 中在指定就没有效果了。</p><p>2、<code>encoing-id</code> 和 <code>encoders</code> 都不指定，以 <code>PasswordEncoderEnum</code> 枚举类中定义的 <code>status</code> 字段为主。</p></div>`,10),l=[p];function d(r,t,o,c,h,k){return i(),a("div",null,l)}const g=s(n,[["render",d]]);export{b as __pageData,g as default};
